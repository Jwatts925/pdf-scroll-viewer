<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>James Watts</title>

  <!-- Font: Roboto -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --page-gap: 18px;

      /* BLACK THEME */
      --bg: #000000;
      --page-bg: #000000;
      --text: #ffffff;
      --muted: rgba(255,255,255,0.65);
      --border: rgba(255,255,255,0.18);

      --font: "Roboto", system-ui, -apple-system, "Segoe UI", Arial, sans-serif;

      /* SVG art keeps its own colors */
      --art-filter: none;
    }

    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family: var(--font);
    }

    body.menu-open{
      overflow: hidden;
      height: 100vh;
      touch-action: none;
    }

    /* ================= HEADER ================= */

    header{
      position: sticky;
      top: 0;
      z-index: 10;

      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 16px;

      padding: 12px 14px;
      background: rgba(0,0,0,0.88);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--border);
    }

    header,
    #loadingBar{
      transition: transform 220ms ease;
      will-change: transform;
    }

    body.top-hidden header,
    body.top-hidden #loadingBar{
      transform: translateY(-120%);
    }

    .left{
      display:flex;
      align-items:baseline;
      gap:12px;
      white-space: nowrap;
    }

    .brand{
      display:flex;
      align-items:baseline;
      gap:10px;
    }

    .brand .title{
      font-weight:700;
      font-size:16px;
      letter-spacing: 0.2px;
      color:#fff;
    }

    .brand .sub{
      font-size:12px;
      color: var(--muted);
      font-weight:400;
    }

    .divider{
      width:1px;
      height:18px;
      background: rgba(255,255,255,0.35);
    }

    .download{
      background: transparent;
      border: none;
      padding: 0;
      margin: 0;

      font-size:13px;
      font-weight:700;
      text-decoration:none;
      cursor:pointer;

      color:#fff !important;
      -webkit-text-fill-color:#fff;
      font-family: var(--font);
    }

    .download:hover{ text-decoration: underline; }

    .menuBtn{
      background:none;
      border:none;
      width:34px;
      height:28px;
      cursor:pointer;
      padding:0;
    }

    .menuIcon{
      position: relative;
      width: 22px;
      height: 16px;
    }

    .menuIcon span{
      position:absolute;
      left:0;
      right:0;
      height:2px;
      background: rgba(255,255,255,0.85);
      border-radius:2px;
      transition: transform 160ms ease, top 160ms ease, opacity 160ms ease;
    }

    .menuIcon span:nth-child(1){ top:1px; }
    .menuIcon span:nth-child(2){ top:7px; }
    .menuIcon span:nth-child(3){ top:13px; }

    body.menu-open .menuIcon span:nth-child(1){
      top:7px;
      transform: rotate(45deg);
    }
    body.menu-open .menuIcon span:nth-child(2){
      opacity:0;
    }
    body.menu-open .menuIcon span:nth-child(3){
      top:7px;
      transform: rotate(-45deg);
    }

    /* ================= OVERLAY MENU ================= */

    .overlay{
      position:fixed;
      inset:0;
      z-index:999;
      display:none;
      background:#000;
      overflow:hidden;
    }

    body.menu-open .overlay{ display:block; }

    .overlayMenu{
      position: relative;
      width: min(1400px, 92vw);
      margin: 0 auto;
      padding: 90px 0 0;
      display:flex;
      flex-direction:column;
      gap:28px;
      min-height:100vh;
    }

    .menuItem{
      background:none;
      border:none;
      text-align:left;
      cursor:pointer;
      padding:0;
      width:100%;
      color:#fff;
    }

    .menuItemTitle{
      font-weight:700;
      font-size: clamp(52px, 7.5vw, 96px);
      line-height:1.02;
      transform-origin:left center;
      transform:scale(1);
      transition: transform 160ms ease;
    }

    .menuItem:hover .menuItemTitle{
      transform:scale(1.06);
    }

    .menuItem[aria-selected="true"] .menuItemTitle{
      transform:scale(1.04);
    }

    .menuItem[aria-selected="true"]:hover .menuItemTitle{
      transform:scale(1.08);
    }

    /* ================= ART ================= */

    .menuArtArea{
      width:100vw;
      margin-left: calc(50% - 50vw);
      margin-top:auto;
      height: clamp(34vh, 42vh, 52vh);
      position:relative;
      overflow:visible;
      pointer-events:none;
    }

    .menuArt{
      position:absolute;
      left:50%;
      bottom:-1vh;
      transform:translateX(-50%);
      width:100vw;
      height:auto;
      max-height:100vh;
      object-fit:contain;
      object-position:top center;
    }

    @media (min-width:1200px){
      .menuArt{
        bottom:-50vh;
      }
    }

    /* ================= PDF VIEWER ================= */

    #viewer{
      display:flex;
      flex-direction:column;
      align-items:center;
      padding:0 10px 60px;
      gap:var(--page-gap);
      background:#000;
    }

    .page{
      width: min(1100px, 96vw);
      background:#000;
      border-radius:4px;
      border:1px solid rgba(255,255,255,0.1);
      box-shadow:0 2px 10px rgba(0,0,0,0.6);
      overflow:hidden;
    }

    .page canvas{
      width:100%;
      height:auto;
      display:block;
    }

  </style>
</head>

<body>
  <!-- HEADER -->
  <header>
    <div class="left">
      <div class="brand">
        <div class="title">James Watts</div>
        <div class="sub">2021â€“2026</div>
      </div>
      <div class="divider"></div>
      <a id="downloadBtn" class="download" download>Download PDF</a>
    </div>

    <button id="menuBtn" class="menuBtn">
      <div class="menuIcon">
        <span></span><span></span><span></span>
      </div>
    </button>
  </header>

  <!-- OVERLAY -->
  <div id="overlay" class="overlay">
    <div class="overlayMenu">
      <button class="menuItem" data-pdf="the-man.pdf"><div class="menuItemTitle">The Man</div></button>
      <button class="menuItem" data-pdf="resume.pdf"><div class="menuItemTitle">The Resume</div></button>
      <button class="menuItem" data-pdf="portfolio.pdf"><div class="menuItemTitle">The Portfolio</div></button>
      <button class="menuItem" aria-selected="true" data-pdf="glass-construction-manual.pdf">
        <div class="menuItemTitle">The Glass Manual</div>
      </button>

      <div class="menuArtArea">
        <img class="menuArt" src="menu-art.svg" alt="">
      </div>
    </div>
  </div>

  <main id="viewer"></main>

  <!-- PDF.JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc =
      "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";

    const viewer = document.getElementById("viewer");
    const downloadBtn = document.getElementById("downloadBtn");
    const menuBtn = document.getElementById("menuBtn");
    const overlay = document.getElementById("overlay");
    const menuItems = [...document.querySelectorAll(".menuItem")];

    function openMenu(){ document.body.classList.add("menu-open"); }
    function closeMenu(){ document.body.classList.remove("menu-open"); }

    menuBtn.onclick = () =>
      document.body.classList.contains("menu-open") ? closeMenu() : openMenu();

    menuItems.forEach(item=>{
      item.onclick = ()=>{
        menuItems.forEach(b=>b.removeAttribute("aria-selected"));
        item.setAttribute("aria-selected","true");
        closeMenu();
        loadPdf(item.dataset.pdf);
      };
    });

    async function loadPdf(url){
      viewer.innerHTML="";
      downloadBtn.href = url;
      const pdf = await pdfjsLib.getDocument(url).promise;
      for(let i=1;i<=pdf.numPages;i++){
        const page = await pdf.getPage(i);
        const vp = page.getViewport({ scale: 1.2 });
        const canvas = document.createElement("canvas");
        canvas.width = vp.width;
        canvas.height = vp.height;
        const ctx = canvas.getContext("2d");
        await page.render({canvasContext:ctx,viewport:vp}).promise;
        const wrap = document.createElement("div");
        wrap.className="page";
        wrap.appendChild(canvas);
        viewer.appendChild(wrap);
      }
    }

    loadPdf("glass-construction-manual.pdf");
  </script>
</body>
</html>
